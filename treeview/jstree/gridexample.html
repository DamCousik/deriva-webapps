<html>
	<head>
		<title>jstree treegrid 3.2.0 plugin demo</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
		<script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
		<link rel="stylesheet" href="themes/default/style.css" />
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.2/jstree.min.js"></script>
		<script type="text/javascript" src="jstreegrid.js"></script>
		<script type="text/javascript" src="splitter.js"></script>
		<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>

	</head>
	<body>
	  <!-- 3 setup a container element -->
		<div class="row" id="splitter" style="height:100%;" >
			<div class="col-md-1 col-lg-1" id="look-up" style="padding-right:0px;">
				<div class="panel-group" id="accordion" style="height:100%;overflow:auto">
					<div class="panel panel-default">
              <div class="panel-heading">
                <h4 class="panel-title">
                  <a data-toggle="collapse" href="#facets-1"><span class="pull-left glyphicon toggle-icon glyphicon-chevron-down"></span> Strength</a>
                </h4>
              </div>
              <div id="facets-1" class="panel-collapse collapse in">
                <ul class="list-group">
                  <div class="list-group-item">
										<img src="resources/images/ExpressionMapping/ExpressionStrengthsKey/Present(unspecifiedStrength).gif" class="icon">
										<span class="plaintext">Present (unspecified strength)</span>
                  </div>
									<div class="list-group-item">
										<img src="resources/images/ExpressionMapping/ExpressionStrengthsKey/Present(strong).gif" class="icon">
										<span class="plaintext">Present (strong)</span>
                  </div>
									<div class="list-group-item">
										<img src="resources/images/ExpressionMapping/ExpressionStrengthsKey/Present(moderate).gif" class="icon">
										<span class="plaintext">Present (moderate)</span>
                  </div>
									<div class="list-group-item">
										<img src="resources/images/ExpressionMapping/ExpressionStrengthsKey/Present(weak).gif" class="icon">
										<span class="plaintext">Present (weak)</span>
                  </div>
									<div class="list-group-item">
										<img src="resources/images/ExpressionMapping/ExpressionStrengthsKey/Uncertain.gif" class="icon">
										<span class="plaintext">Uncertain</span>
                  </div>
									<div class="list-group-item">
										<img src="resources/images/ExpressionMapping/ExpressionStrengthsKey/notDetected.gif" class="icon">
										<span class="plaintext">Not Detected</span>
                  </div>
                </ul>
              </div>
						</div>
						<div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                <a data-toggle="collapse" href="#facets-2"><span class="pull-left glyphicon toggle-icon glyphicon-chevron-down"></span> Pattern</a>
              </h4>
            </div>
            <div id="facets-2" class="panel-collapse collapse in">
              <ul class="list-group">
              	<div class="list-group-item">
									<img src="resources/images/ExpressionMapping/ExpressionPatternKey/Homogeneous.png" class="icon">
									<span class="plaintext">Homogeneous</span>
                </div>
								<div class="list-group-item">
									<img src="resources/images/ExpressionMapping/ExpressionPatternKey/Graded.png" class="icon">
									<span class="plaintext">Graded</span>
                </div>
								<div class="list-group-item">
									<img src="resources/images/ExpressionMapping/ExpressionPatternKey/Regional.png" class="icon">
									<span class="plaintext">Regional</span>
                </div>
								<div class="list-group-item">
									<img src="resources/images/ExpressionMapping/ExpressionPatternKey/Spotted.png" class="icon">
									<span class="plaintext">Spotted</span>
                </div>
								<div class="list-group-item">
									<img src="resources/images/ExpressionMapping/ExpressionPatternKey/Ubiquitous.png" class="icon">
									<span class="plaintext">Ubiquitous</span>
                </div>
								<div class="list-group-item">
									<img src="resources/images/ExpressionMapping/ExpressionPatternKey/Restricted.png" class="icon">
									<span class="plaintext">Restricted</span>
                </div>
								<div class="list-group-item">
									<img src="resources/images/ExpressionMapping/ExpressionPatternKey/SingleCell.png" class="icon">
									<span class="plaintext">Single cell</span>
                </div>
              </ul>
            </div>
          </div>
					<div class="panel panel-default">
						 <div class="panel-heading">
							 <h4 class="panel-title">
								 <a data-toggle="collapse" href="#facets-3"><span class="pull-left glyphicon toggle-icon glyphicon-chevron-down"></span> Density</a>
							 </h4>
						 </div>
						 <div id="facets-3" class="panel-collapse collapse in">
							 <ul class="list-group">
								 <div class="list-group-item">
								 	<img src="resources/images/NerveDensity/RelativeToTotal/high.png" class="icon">
	 								<span class="plaintext">High</span>
								 </div>
								 <div class="list-group-item">
								 	<img src="resources/images/NerveDensity/RelativeToTotal/medium.png" class="icon">
	 								<span class="plaintext">Medium</span>
								 </div>
								 <div class="list-group-item">
								 	<img src="resources/images/NerveDensity/RelativeToTotal/low.png" class="icon">
	 								<span class="plaintext">Low</span>
								 </div>
							 </ul>
						 </div>
					 </div>
					 <div class="panel panel-default">
							<div class="panel-heading">
								<h4 class="panel-title">
									<a data-toggle="collapse" href="#facets-4"><span class="pull-left glyphicon toggle-icon glyphicon-chevron-down"></span> Density Change</a>
								</h4>
							</div>
							<div id="facets-4" class="panel-collapse collapse in">
								<ul class="list-group">
									<div class="list-group-item">
										<img src="resources/images/NerveDensity/RelativeToP0/inc_large.png" class="icon">
 	 									<span class="plaintext">Increase, large</span>
									</div>
									<div class="list-group-item">
										<img src="resources/images/NerveDensity/RelativeToP0/inc_small.png" class="icon">
 	 									<span class="plaintext">Increase, small</span>
									</div>
									<div class="list-group-item">
										<img src="resources/images/NerveDensity/RelativeToP0/dec_large.png" class="icon">
 	 									<span class="plaintext">Decrease, large</span>
									</div>
									<div class="list-group-item">
										<img src="resources/images/NerveDensity/RelativeToP0/dec_small.png" class="icon">
 	 									<span class="plaintext">Decrease, small</span>
									</div>
									<div class="list-group-item">
										<img src="resources/images/NerveDensity/note.gif" class="icon">
										<span class="plaintext">Contains note</span>
									</div>
								</ul>
							</div>
						</div>
        </div>
			</div>
			<div class="col-md-8 col-lg-8">
			  <div class="loader" style=""></div>
			  <div id ="mainDiv" class="input-group has-feedback" style="display:inline;">
			      <div style="position:relative; display:table; border-collapse:separate;">
			        <input type="text" id="plugins4_q" value="" class="input form-control" style="display:inline; visibility: hidden; margin:0em 0em 0em 0.5em; padding:4px; border-radius:4px; border:1px solid silver;width: 22em;margin-top: 1em" placeholder="Search"></input>
			        <div class="form-control-feedback" style="cursor:pointer; right:-4px; top:25px; pointer-events:all; z-index:5;">
			            <span class="glyphicon glyphicon-remove" onclick="reset();"></span>
			        </div>
			      </div>
			      <span class="input-group-btn" style="top:-33px; left:316px;">
			          <button type="button" class="btn btn-primary btn-inverted" onclick="search();">
			              <span class="glyphicon glyphicon-search"></span>
			          </button>
			          <button type="button" class="btn btn-primary btn-inverted" onclick="expandAll();">Expand All</button>
			          <button type="button" class="btn btn-primary btn-inverted" onclick="closeAll();"style="display: inline;">Collapse All</button>
			      </span>
			  </div>
			  <div id="jstree"  >
			    <!-- in this example the tree is populated from inline HTML -->

			  </div>
			</div>
		</div>
	</body>
		<script type="text/javascript">
			$(document).ready(function(){
				$('#splitter').splitter({
				});
				$.getJSON("gudmap_parsed.json", function(presentationData) {
				$("div#jstree").jstree({
					plugins: ["themes","json","grid","search","sort", "types"],
					core: {
						data: presentationData
					},
					grid: {
						columns: [{width:2000}
						]
					},
					 types : {

	            folder : {

	              icon : "glyphicon glyphicon-tree-deciduous",
	              valid_children : ["default"]
	            },

	            file : {
	              icon : "glyphicon glyphicon-leaf",
	              valid_children : []
	            }
	        },
					search: { show_only_matches : false, show_only_matches_children : false, close_opened_onclear: true}
				})
				// .on('loaded.jstree', function() {
				// 	$("div#jstree").jstree('open_all');
				// });
				document.getElementsByClassName('loader')[0].style.display="none";
		    document.getElementById('plugins4_q').style.visibility="visible";

				$("a#change").click(function(){
					var tree = $("div#jstree").jstree(),
					nodename = tree.get_node("#").children[0], node = tree.get_node(nodename),
					val = parseInt(node.data.size);

					node.data.size = node.data.size*2;
					tree.trigger("change_node.jstree",nodename);

					return(false);
				});

				$("a#refresh").click(function(){
					var tree = $("div#jstree").jstree();
					var data = [{
						text: "Root 1",
						data: {price: "$5.00", size: "4"}
					}];
					tree.settings.core.data = data;
					tree.refresh();
					return(false);
				});
				$("input#search").keyup(function (e) {
					var tree = $("div#jstree").jstree();
					tree.search($(this).val());
				});
			});
			$(function () {
	      $("#plugins4").jstree({
	        "plugins" : [ "search" ]
	      });
	      var to = false;
	      $('#plugins4_q').keyup(function () {
	        if(to) { clearTimeout(to); }
	        to = setTimeout(function () {
	          var v = $('#plugins4_q').val();
	          $('#jstree').jstree(true).search(v);
	      }, 1400);
	      });
	    });


		});
		function search(){
				var v=  $('#plugins4_q').val();
				$('#jstree').jstree(true).search(v);
		}
		function reset(){
				document.getElementById('plugins4_q').value="";
				 $("#jstree").jstree('clear_search');
				 $("#jstree").jstree('close_all');
		}

		function expandAll(){

				$('.loader')[0].style.display="block";
				$('#mainDiv')[0].style.display="none";

				$("#jstree").jstree(true).open_all();
				$('.loader')[0].style.display="none";
				$('#mainDiv')[0].style.display="block";
		}

		function closeAll(){
				$("#jstree").jstree('close_all');
		}
		</script>
</html>
